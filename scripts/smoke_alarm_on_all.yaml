# Turn ON Smoke Alarm (Melody 9) - All Sirens
# Copy to Home Assistant configuration.yaml under script:

smoke_alarm_on_all:
  alias: "ðŸ”¥ Smoke Alarm ON - All Sirens"
  description: "Activate smoke alarm (melody 9) on all 6 sirens"
  sequence:
    # Step 1: Configure all sirens for smoke alarm
    - service: mqtt.publish
      data:
        topic: "zigbee2mqtt/living_room_siren/set"
        payload: '{"melody": 9, "volume": "high"}'
    - service: mqtt.publish
      data:
        topic: "zigbee2mqtt/patio_siren/set"
        payload: '{"melody": 9, "volume": "high"}'
    - service: mqtt.publish
      data:
        topic: "zigbee2mqtt/office_siren/set"
        payload: '{"melody": 9, "volume": "high"}'
    - service: mqtt.publish
      data:
        topic: "zigbee2mqtt/powderroom_siren/set"
        payload: '{"melody": 9, "volume": "high"}'
    - service: mqtt.publish
      data:
        topic: "zigbee2mqtt/bedroom_siren/set"
        payload: '{"melody": 9, "volume": "high"}'
    - service: mqtt.publish
      data:
        topic: "zigbee2mqtt/bathroom_siren/set"
        payload: '{"melody": 9, "volume": "high"}'
    
    # Step 2: Wait for configuration
    - delay:
        seconds: 3
    
    # Step 3: Turn ON all sirens
    - service: mqtt.publish
      data:
        topic: "zigbee2mqtt/living_room_siren/set"
        payload: '{"alarm": true}'
    - service: mqtt.publish
      data:
        topic: "zigbee2mqtt/patio_siren/set"
        payload: '{"alarm": true}'
    - service: mqtt.publish
      data:
        topic: "zigbee2mqtt/office_siren/set"
        payload: '{"alarm": true}'
    - service: mqtt.publish
      data:
        topic: "zigbee2mqtt/powderroom_siren/set"
        payload: '{"alarm": true}'
    - service: mqtt.publish
      data:
        topic: "zigbee2mqtt/bedroom_siren/set"
        payload: '{"alarm": true}'
    - service: mqtt.publish
      data:
        topic: "zigbee2mqtt/bathroom_siren/set"
        payload: '{"alarm": true}'
